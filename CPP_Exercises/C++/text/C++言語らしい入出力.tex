subsection{C++言語らしい入出力をする}C言語では，データの型を反映したフォーマットつきの出力や入力を verb+printf+ 系の関数，verb+scanf+ 系の関数で行うことが多い．これらの関数は便利であるが，引数の数や型が自由であり，コンパイル時に完全なチェックが行われない．そのため，実行時エラーの原因になりやすく，また悪意のあるユーザーが，プログラマが意図しないプログラムを実行させることのできる``セキュリティ・ホール''の原因になることがある．C++言語では伝統的な verb+printf+ 等の入出力関数のほかに，``ストリーム''とよばれるファイルの入出力の体系をライブラリで備えており，コンソールなどの標準入出力やファイルの入出力において，データや変数の型および個数をはっきりさせたプログラムを書くことができる．C++ のストリーム標準入出力を使う場合は，専用のヘッダ（インクルード）ファイル verb+iostream+ の利用を宣言する必要がある．これは，C の verb+stdio.h+ にあたる．変数 verb+var1+ と verb+var2+ をメッセージ（verb+"+ verb+"+ でくくられた文字の配列）と共にコンソールへ出力するには，たとえば以下のようにプログラムする．begin{verbatim}    std::cout << "message: " << var1 << ", another message: "           << var2 << "n";end{verbatim}最後の文字は，ここでは改行記号として用いているfootnotetext{実際は，OS 等によって異なる改行記号を使い分けるため，定義済みの文字定数 verb+std::endl+ を使う方が好ましい．}．言語に用意されている型は，自由に verb+<<+ の引数に使うことができる．さらに，自分で定義したクラスについても，呼び出される演算子を関数として自分で定義すれば，既存の型とまったく同様に使用することができる．たとえば Java 言語では，整数などプリミティブデータ型とクラス型のデータの扱いは大きく異なり，また演算子をプログラミングすることはできない．そこでクラスには verb+toString()+ 関数を用意しておき，内部で文字列への追加演算子 verb-+- の実体として呼び出されるようにしてある．これによって，verb+System.out.println()+ などの引数で自分のクラス型を使えるようにしている．C++ では，さまざまな演算子をクラスに定義しプログラミングに使用することができ，見かけ上は，整数や配列を扱っているかのようにプログラムを書くことができる．これは，予期しない動作をする演算子を作ったり無意識に使うことにもなるので，注意が必要である．自分で作ったクラス型データのストリームへの入出力も，演算子を関数定義するしくみを使って実現するわけだが，演算子，およびフレンド関数の宣言の知識が必要となり，この演習での説明の範囲を超える．発展課題として提供しておくので，興味がある，腕に自信があるときは，取り組むと面白いだろう．%演習８